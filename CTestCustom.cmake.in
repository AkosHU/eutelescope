#
# +++++++++ IGNORE SOME OF THE TESTS WHEN RUNNING MEMCHECKS (e.g. valgrind) +++++++++++++++
#
# this basically includes every test except the *Run tests
#

set (CTEST_CUSTOM_MEMCHECK_IGNORE 
	${CTEST_CUSTOM_MEMCHECK_IGNORE}
	TestPysubExampleDaturaAloneCleanup
	TestPysubExampleDaturaAloneSetup
	TestPysubExampleDaturaAloneConverterLog
	TestPysubExampleDaturaAloneConverterHisto
	TestPysubExampleDaturaAloneConverterHotpix
	TestPysubExampleDaturaAloneConverterOutput
	TestPysubExampleDaturaAloneClusearchLog
	TestPysubExampleDaturaAloneClusearchHisto
	TestPysubExampleDaturaAloneClusearchOffset
	TestPysubExampleDaturaAloneClusearchOutput
	TestPysubExampleDaturaAloneHitmakerLog
	TestPysubExampleDaturaAloneHitmakerHisto
	TestPysubExampleDaturaAloneHitmakerPrealign
	TestPysubExampleDaturaAloneHitmakerOutput
	TestPysubExampleDaturaAloneAlignLog
	TestPysubExampleDaturaAloneAlignHisto
	TestPysubExampleDaturaAloneAlignDB
	TestPysubExampleDaturaAloneAlignOutput
	TestPysubExampleDaturaAloneFitterLog
	TestPysubExampleDaturaAloneFitterHisto
	TestPysubExampleDaturaAloneFitterOutput
	TestPysubExampleDaturaAloneStatTestAlign
	TestPysubExampleDaturaAloneStatTestFitter
    )

# use valgrind for dynamic analysis
set (CTEST_MEMORYCHECK_COMMAND "/usr/bin/valgrind")
set (CTEST_MEMORYCHECK_COMMAND_OPTIONS "--log-file=vlogs --leak-check=full --xml=yes")

# increase the maximum number of warnings reported by ctest from the default 50
set (CTEST_CUSTOM_MAXIMUM_NUMBER_OF_WARNINGS 150)

# actually install the binaries after building so that they can be used in the tests
set (CTEST_CUSTOM_PRE_TEST
    "make install"
    )
